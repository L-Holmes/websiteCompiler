<!DOCTYPE html>
<html lang="en">
	<title> Awpen </title>
	<head>
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<meta name="description" content="A cool website">

		<link rel=stylesheet href="test.css">


		<script>
			// -- PROCESSING THE URL PARAMETERS --
			document.addEventListener('DOMContentLoaded', () => {
				// e.g. http://127.0.0.1:8000/test.html?category=products&type=video,newsub
				// --> to note: need to be careful when adding params to the url. only add 'type' if a subtype is selected.
				// --> only add 'category' if no subtypes are selected. 
				// --> don't add 'category=blogs' if say blogs.video already selected...


				const params = new URLSearchParams(window.location.search);

				// Parent categories
				const category = (params.get('category') || '').toLowerCase();
				const categoryMap = { products: 'cat-products', blogs: 'cat-blogs' };
				if (categoryMap[category]) document.getElementById(categoryMap[category]).checked = true;

				// Mapping subcategory ID â†’ parent checkbox ID
				const subToParent = {
					shoes: 'cat-products',
					tables: 'cat-products',
					article: 'cat-blogs',
					video: 'cat-blogs',
					newsub: 'cat-blogs',
					fourth: 'cat-blogs',
					// add more as needed
				};

				// Check subcategories
				const typeParam = params.get('type');
				if (typeParam) {
					typeParam.split(',').map(s => s.trim().toLowerCase()).forEach(sub => {
						const el = document.getElementById('type-' + sub);
						if (el) el.checked = true;

						// Check parent based on mapping
						const parentId = subToParent[sub];
						if (parentId) document.getElementById(parentId).checked = true;
					});
				}
			});
		</script>
	</head>
	<body>

		<form class="filterable" id="catalog" aria-label="Product filters">

			<!-- Add these target anchors anywhere inside .filterable BEFORE the .panel -->
			<a id="blogs-target" aria-hidden="true"></a>
			<a id="products-target" aria-hidden="true"></a>

			<!-- ---------------------- These are hidden checkboxes that control the state ---------------------- -->
			<!-- Parent Category Filters -->
			<input type="checkbox" id="cat-products" class="filter-input" />
			<input type="checkbox" id="cat-blogs" class="filter-input" />

			<!-- ==> Product Sub-filters -->
			<input type="checkbox" id="type-shoes" class="filter-input" />
			<input type="checkbox" id="type-tables" class="filter-input" />

			<!-- ==> Blogs Sub-filters -->
			<input type="checkbox" id="type-article" class="filter-input" />
			<input type="checkbox" id="type-video" class="filter-input" />
			<input type="checkbox" id="type-newsub" class="filter-input" />
			<input type="checkbox" id="type-fourth" class="filter-input" />

			<!-- ------------------------------------------------------------------------------------------------- -->

			<!-- HEADER / CONTROLS -->
			<div class="header" role="toolbar" aria-label="Filters header">
				<div class="controls">


					<!-- ---------------------- These are the actual toggle buttons for the user to click ---------------------- -->

					<!-- Main Categories -->
					<div class="group">
						<span class="group-title">Category</span>
						<label for="cat-products" class="filter-btn">Products</label>
						<label for="cat-blogs" class="filter-btn">Blogs</label>
					</div>

					<!-- ==> Product Filters -->
					<div class="group product-types">
						<span class="group-title">Products</span>
						<label for="type-shoes" class="filter-btn">Products -> Shoes</label>
						<label for="type-tables" class="filter-btn">Products -> Tables</label>
					</div>

					<!-- ==> Blogs Filters -->
					<div class="group blog-types"> 
						<span class="group-title">Products</span>
						<label for="type-article" class="filter-btn">Blogs -> Article</label>
						<label for="type-video" class="filter-btn">Blogs -> Video</label>
						<label for="type-newsub" class="filter-btn">Blogs -> New Sub </label>
						<label for="type-fourth" class="filter-btn">Blogs -> fourth </label>
					</div>

					<!-- ------------------------------------------------------------------------------------------------- -->

					<div class="group">
						<button type="reset" class="filter-btn">Clear all</button>
					</div>

				</div>
			</div>

			<!-- PANEL / ITEMS -->
			<div class="panel" id="panel" aria-live="polite">
				<div class="items">
					<!-- Each item has a space-separated list of all tags it belongs to -->
					<div class="item" data-tags="products products.shoes">Trainer</div>
					<div class="item" data-tags="products products.shoes">Cowboy Boot</div>
					<div class="item" data-tags="products products.tables">Table</div>
					<div class="item" data-tags="blogs blogs.article">Article 1</div>
					<div class="item" data-tags="blogs blogs.article">Article 2</div>
					<div class="item" data-tags="blogs blogs.video">video 1</div>
					<div class="item" data-tags="blogs blogs.newsub">new new </div>
					<div class="item" data-tags="blogs blogs.fourth">new fourth filter test</div>
					<div class="item" data-tags="blogs blogs.fourth blogs.newsub">fingers crossed</div>
				</div>
			</div>
		</form>

	</body>
</html>
